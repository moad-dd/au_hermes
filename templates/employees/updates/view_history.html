{% extends 'base.html' %}

{% block title %}History - AU HERMES{% endblock %}

{% block content %}
<div class="container mt-4">
  <h3 class="text-center mb-4">
    ðŸ•“ Action History - {{ fonctionnaire.nom }} {{ fonctionnaire.prenom }}
  </h3>

  {% if historique %}
  <div class="table-responsive">
    <table class="table table-hover align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Date & Time</th>
          <th>Action Type</th>
          <th>Details</th>
          <th>User</th>
        </tr>
      </thead>
      <tbody>
        {% for h in historique %}
        <tr>
          <td>{{ h.date_action|date:"M d, Y H:i" }}</td>
          <td><span class="badge bg-info">{{ h.type_action }}</span></td>
          <td>{{ h.details }}</td>
          <td>{{ h.user.username|default:"System" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="text-center text-muted py-5">
    <i class="bi bi-clock-history" style="font-size: 3rem;"></i>
    <p class="mt-3">No history records available.</p>
  </div>
  {% endif %}

  <div class="text-center mt-4">
    <a href="{% url 'civil_servant_detail' fonctionnaire.id %}" class="btn btn-secondary">
      <i class="bi bi-arrow-left"></i> Back to Details
    </a>
  </div>
</div>
{% endblock %}