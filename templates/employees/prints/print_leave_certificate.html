{% extends 'base.html' %}

{% block title %}Leave Certificate - {{ conge.fonctionnaire.nom }}{% endblock %}

{% block content %}
<style>
  @media print {
    .no-print { display: none !important; }
    body { background: white !important; }
  }
</style>

<div class="container mt-4">
  <div class="card border-0 shadow" style="max-width: 900px; margin: auto;">
    <div class="card-body p-5">
      <!-- Header -->
      <div class="text-center mb-4 pb-3 border-bottom">
        <h2 class="text-primary fw-bold">AU HERMES</h2>
        <p class="text-muted">Human Resources Department</p>
      </div>

      <!-- Title -->
      <h3 class="text-center fw-bold mb-5">LEAVE CERTIFICATE</h3>

      <!-- Employee Info -->
      <div class="mb-4">
        <table class="table table-borderless">
          <tr>
            <th width="200">Full Name:</th>
            <td>{{ conge.fonctionnaire.nom }} {{ conge.fonctionnaire.prenom }}</td>
          </tr>
          <tr>
            <th>Grade:</th>
            <td>{{ conge.fonctionnaire.grade }}</td>
          </tr>
          <tr>
            <th>Social Security:</th>
            <td>{{ conge.fonctionnaire.ss }}</td>
          </tr>
        </table>
      </div>

      <hr class="my-4">

      <!-- Leave Details -->
      <h5 class="fw-bold mb-3">Leave Information:</h5>
      <table class="table table-bordered">
        <tr>
          <th width="200" class="table-light">Leave Type:</th>
          <td>{{ conge.type_conge }}</td>
        </tr>
        <tr>
          <th class="table-light">Start Date:</th>
          <td>{{ conge.date_debut|date:"F d, Y" }}</td>
        </tr>
        <tr>
          <th class="table-light">End Date:</th>
          <td>{{ conge.date_fin|date:"F d, Y" }}</td>
        </tr>
        <tr>
          <th class="table-light">Duration:</th>
          <td>
            {% widthratio conge.date_fin|date:"U"|add:86400 1 conge.date_debut|date:"U" %} days
          </td>
        </tr>
        <tr>
          <th class="table-light">Reason:</th>
          <td>{{ conge.motif }}</td>
        </tr>
      </table>

      <!-- Authorization Statement -->
      <div class="alert alert-info mt-4">
        <p class="mb-0">
          <strong>Authorization:</strong> The above-mentioned employee is authorized 
          to be absent from work during the specified period for the stated reason.
        </p>
      </div>

      <!-- Signature Section -->
      <div class="row mt-5">
        <div class="col-md-6">
          <p><strong>Issued on:</strong> {{ conge.date_debut|date:"F d, Y" }}</p>
        </div>
        <div class="col-md-6 text-end">
          <p class="mb-5">_____________________________</p>
          <p class="mb-0"><strong>HR Manager</strong></p>
          <p class="text-muted small">AU HERMES</p>
        </div>
      </div>

      <!-- Footer Note -->
      <div class="text-center mt-4 pt-3 border-top">
        <p class="text-muted small">
          This leave certificate must be presented upon return to work.
        </p>
      </div>
    </div>
  </div>

  <!-- Print Button -->
  <div class="text-center mt-4 no-print">
    <button onclick="window.print()" class="btn btn-primary px-5">
      <i class="bi bi-printer"></i> Print Certificate
    </button>
    <a href="{% url 'civil_servant_detail' conge.fonctionnaire.id %}" class="btn btn-secondary px-5">
      <i class="bi bi-arrow-left"></i> Back
    </a>
  </div>
</div>
{% endblock %}